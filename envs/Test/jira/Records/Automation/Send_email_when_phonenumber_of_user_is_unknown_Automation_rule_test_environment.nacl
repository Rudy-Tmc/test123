jira.Automation Send_email_when_phonenumber_of_user_is_unknown_Automation_rule_test_environment@sssssssusss {
  name = "Send email when phonenumber of user is unknown"
  state = "DISABLED"
  authorAccountId = {
    id = "557058:fbbb56de-c97c-4b68-8216-2e193b8dffdc"
    displayName = "Rudy Holtkamp"
  }
  actor = {
    type = "ACCOUNT_ID"
    value = {
      id = "557058:f58131cb-b67d-43c7-b30d-6b58d40bd077"
      displayName = "Automation for Jira"
    }
  }
  trigger = {
    component = "TRIGGER"
    schemaVersion = 1
    type = "jira.jql.scheduled"
    value = {
      schedule = {
        cronExpression = ""
        method = "FIXED"
        rate = 5
        rateInterval = 60
      }
      jql = "(${ jira.Field.instance.Issue_Type__issuetype@suu } = ${ jira.IssueType.instance.Task.name }) and statusCategory in (\"To Do\")"
      executionMode = "jql"
      onlyUpdatedIssues = false
    }
    children = [
    ]
    conditions = [
    ]
  }
  components = [
    {
      component = "CONDITION"
      schemaVersion = 1
      type = "jira.comparator.condition"
      value = {
        first = "{{#issue.comments}}{{body}}{{^last}},{{/}}{{/}}"
        second = "Request phone number email sent!"
        operator = "NOT_CONTAINS"
      }
      children = [
      ]
      conditions = [
      ]
    },
    {
      component = "ACTION"
      schemaVersion = 3
      type = "jira.issue.outgoing.email"
      value = {
        fromName = ""
        replyTo = ""
        to = [
          {
            type = "COPY"
            value = "reporter"
          },
        ]
        cc = [
        ]
        bcc = [
        ]
        subject = "{{issue.key}} ***PLEASE SEND US YOUR PHONE NUMBER***"
        body = '''
Thank you for your e-mail to support@onegini.com.

Can you please reply to this email and provide us with your phonenumber, so that we can contact you about this ticket if necessary and speed up the initial intake?

As soon as we receive your phone number, we will start working on your reported issue.

You can track the status of your support ticket(s) by creating an account at support.onegini.com. You can also use this to raise new tickets.

Kind regards,
Onegini Service Desk
'''
        mimeType = "text/html"
        convertLineBreaks = true
      }
      children = [
      ]
      conditions = [
      ]
    },
    {
      component = "ACTION"
      schemaVersion = 1
      type = "jira.issue.comment"
      value = {
        comment = "Request phone number email sent!"
        publicComment = false
        sendNotifications = true
        addCommentOnce = true
      }
      children = [
      ]
      conditions = [
      ]
    },
  ]
  canOtherRuleTrigger = false
  notifyOnError = "FIRSTERROR"
  projects = [
    {
      projectId = jira.Project.instance.Automation_rule_test_environment@s
    },
  ]
  labels = [
  ]
  tags = [
  ]
  ruleHome = {
    
    ruleBillingHome = {
      locationARI = "ari:cloud:jira-software::site/a2ab9907-a2ed-48fe-9138-15c0301eaee1"
    }
    ruleLifecycleHome = {
      locationARI = "ari:cloud:jira:a2ab9907-a2ed-48fe-9138-15c0301eaee1:project/10012"
    }
  }
  writeAccessType = "UNRESTRICTED"
  collaborators = [
  ]
  billingType = "NORMAL"
  _alias = "Send email when phonenumber of user is unknown"
}
